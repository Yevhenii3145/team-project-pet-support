"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[364],{6107:function(e,t,a){a.d(t,{Z:function(){return r}});var n="loader_loading__modal__8AohZ",s=a(8966),i=a(3329),r=function(){return(0,i.jsx)("div",{className:n,children:(0,i.jsx)(s.ne,{height:"100",width:"100",color:"#F59256",ariaLabel:"hearts-loading",wrapperStyle:{},wrapperClass:"",visible:!0})})}},8235:function(e,t,a){a.r(t),a.d(t,{default:function(){return je}});var n=a(2791),s="user-data-item_userItem_container__neJio",i="user-data-item_userItem_box_yourPhoto__A6dWO",r="user-data-item_userItem_box_btnPhoto__e8bo1",o="user-data-item_userDataForm_box__UwT0M",l="user-data-item_field_box__4xcgt",d="user-data-item_userDataForm_field__32mZT",c="user-data-item_userDataForm_field_active__CXnHf",u="user-data-item_iconEdit_btn__LP-z7",m="user-data-item_userDataForm_label__oNaKJ",_="user-data-item_userItem_edit_photo__55rGT",p="user-data-item_userItem_input_edit_photo__LoxV3",h="user-data-item_userItem__yourPhoto__Xt9Av",x="user-data-item_loader__content__SyicD",f=a(9439),g=a(3220),v=a(9434),j=a(4632),b=a(3263),N=a(5264),y=(a(9358),a(9557)),Z=a(8966),D=a(3329),C="https://backend-team-project-pet-support.onrender.com";function w(){var e=(0,v.I0)(),t=(0,v.v9)((function(e){return e.auth.user})),a=(0,v.v9)((function(e){return e.auth.token})),s=(0,n.useState)(""),i=(0,f.Z)(s,2),r=i[0],_=i[1],p=(0,n.useState)(""),h=(0,f.Z)(p,2),b=h[0],w=h[1],k=(0,n.useState)(""),P=(0,f.Z)(k,2),F=P[0],S=P[1],A=(0,n.useState)(""),T=(0,f.Z)(A,2),M=T[0],I=T[1],L=(0,n.useState)(""),q=(0,f.Z)(L,2),E=q[0],U=q[1],R=(0,n.useState)(""),B=(0,f.Z)(R,2),z=B[0],W=B[1],Y=new Date,G=function(e){var t=new Date(e);return"".concat(t.getMonth()+1<10?"0".concat(t.getMonth()+1):t.getMonth()+1,".").concat(t.getDate()<10?"0".concat(t.getDate()):t.getDate(),".").concat(t.getFullYear())};(0,n.useEffect)((function(){_(!0),void 0===a?(w(t.name),S(t.email),I(void 0!==t.birthday?G(t.birthday):"00.00.0000"),U(t.phone),W(t.city),_(!1)):fetch("".concat(C,"/api/users/current"),{method:"GET",headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).then((function(e){w(e.name),S(e.email),I(void 0!==e.birthday?G(e.birthday):"00.00.0000"),U(e.phone),W(e.city),_(!1)})).catch((function(e){console.log(e),_(!1)}))}),[t,a]);var H=function(e){switch(e.currentTarget.name){case"name":w(e.currentTarget.value);break;case"email":S(e.currentTarget.value);break;case"phone":U(e.currentTarget.value);break;case"city":W(e.currentTarget.value);break;default:return}},K=(0,n.useState)(""),V=(0,f.Z)(K,2),X=V[0],J=V[1],O=function(e){if(X===e)return J("");J(e)},Q=function(e){return X===e?(0,D.jsx)(g.Z,{id:"icon-done"}):(0,D.jsx)(g.Z,{id:"icon-edit-active"})};return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)("div",{className:o,children:r?(0,D.jsx)(D.Fragment,{children:(0,D.jsx)("div",{className:x,children:(0,D.jsx)(Z.iT,{height:80,width:80,color:"#F59256",wrapperStyle:{},wrapperClass:"",visible:!0,ariaLabel:"oval-loading",secondaryColor:"#F59256",strokeWidth:2,strokeWidthSecondary:2})})}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.name;if(a.disabled)return a.value?e(j.ZP.updateUser({name:a.value})):N.Notify.failure("Required!",{timeout:5e3})},children:(0,D.jsxs)("div",{className:l,children:[(0,D.jsx)("label",{className:m,children:"Name:"}),X&&"name"===X?(0,D.jsx)("input",{onChange:H,type:"name",name:"name",value:b,className:c}):(0,D.jsx)("input",{onChange:H,type:"name",name:"name",value:b,disabled:!0,className:d}),(0,D.jsx)("button",{className:u,onClick:function(){return O("name")},type:"submit",children:X?Q("name"):(0,D.jsx)(g.Z,{id:"icon-edit"})})]})}),(0,D.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.email;if(a.disabled)return a.value?/^((([0-9A-Za-z]{1}[-0-9A-z]{1,}[0-9A-Za-z]{1}))@([-0-9A-Za-z]{1,}\.){1,2}[-A-Za-z]{2,})$/i.test(a.value)&&a.value.length<36?e(j.ZP.updateUser({email:a.value})):N.Notify.failure("Invalid email address!",{timeout:5e3}):N.Notify.failure("Required!",{timeout:5e3})},children:(0,D.jsxs)("div",{className:l,children:[(0,D.jsx)("label",{className:m,children:"Email:"}),X&&"email"===X?(0,D.jsx)("input",{onChange:H,type:"email",name:"email",value:F,className:c}):(0,D.jsx)("input",{onChange:H,type:"email",name:"email",value:F,disabled:!0,className:d}),(0,D.jsx)("button",{className:u,onClick:function(){return O("email")},children:X?Q("email"):(0,D.jsx)(g.Z,{id:"icon-edit"})})]})}),(0,D.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.birthday;if(a.disabled)return a.value?e(j.ZP.updateUser({birthday:a.value})):N.Notify.failure("Required!",{timeout:5e3})},children:(0,D.jsxs)("div",{className:l,children:[(0,D.jsx)("label",{className:m,children:"Birthday:"}),X&&"birthday"===X?(0,D.jsx)(y.Z,{options:{dateFormat:"m.d.Y",maxDate:"".concat(G(Y))},onChange:function(e){var t=(0,f.Z)(e,1)[0];I(G(t))},type:"text",name:"birthday",value:M,className:c}):(0,D.jsx)(y.Z,{options:{dateFormat:"m.d.Y",maxDate:"".concat(G(Y))},onChange:function(e){var t=(0,f.Z)(e,1)[0];I(G(t))},type:"text",name:"birthday",value:M,disabled:!0,className:d}),(0,D.jsx)("button",{className:u,onClick:function(){return O("birthday")},children:X?Q("birthday"):(0,D.jsx)(g.Z,{id:"icon-edit"})})]})}),(0,D.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.phone;if(a.disabled)return a.value?12!==a.value.length?N.Notify.failure("Is not correct format, must 380xxxxxxxxx!",{timeout:5e3}):/^3?[\s]?8?[\s]?\(?0\d{2}?\)?[\s]?\d{3}[\s|-]?\d{2}[\s|-]?\d{2}$/.test(a.value)?e(j.ZP.updateUser({phone:a.value})):N.Notify.failure("Is not correct format, must 380xxxxxxxxx!",{timeout:5e3}):N.Notify.failure("Required!",{timeout:5e3})},children:(0,D.jsxs)("div",{className:l,children:[(0,D.jsx)("label",{className:m,children:"Phone:"}),X&&"phone"===X?(0,D.jsx)("input",{onChange:H,type:"tel",name:"phone",value:E,className:c}):(0,D.jsx)("input",{onChange:H,type:"tel",name:"phone",value:E,disabled:!0,className:d}),(0,D.jsx)("button",{className:u,onClick:function(){return O("phone")},type:"submit",children:X?Q("phone"):(0,D.jsx)(g.Z,{id:"icon-edit"})})]})}),(0,D.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.city;if(a.disabled)return a.value?/^[aA-zZ]/.test(a.value)?e(j.ZP.updateUser({city:a.value})):N.Notify.failure("Is not correct format, must only letters!",{timeout:5e3}):N.Notify.failure("Required!",{timeout:5e3})},children:(0,D.jsxs)("div",{className:l,children:[(0,D.jsx)("label",{className:m,children:"City:"}),X&&"city"===X?(0,D.jsx)("input",{onChange:H,type:"text",name:"city",value:z,className:c}):(0,D.jsx)("input",{onChange:H,type:"text",name:"city",value:z,disabled:!0,className:d}),(0,D.jsx)("button",{className:u,onClick:function(){return O("city")},children:X?Q("city"):(0,D.jsx)(g.Z,{id:"icon-edit"})})]})})]})})})}b.Z.defaults.baseURL="".concat(C,"/api");function k(){var e=(0,v.v9)((function(e){return e.auth.user})),t=((0,v.v9)((function(e){return e.auth.token})),(0,v.I0)());return(0,D.jsxs)("div",{className:s,children:[(0,D.jsxs)("div",{className:i,children:[(0,D.jsx)("img",{className:h,src:e.avatar?e.avatar:"https://dummyimage.com/150x150/FDF7F2.gif&text=Add+your+photo!",alt:""}),(0,D.jsx)("div",{className:r,children:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("input",{className:p,type:"file",name:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",id:"file",onChange:function(e){var a=new FileReader,n=e.target.files[0];(null===n||void 0===n?void 0:n.size)>5242880?N.Notify.warning("File is too big, please download max 5 mb!",{timeout:5e3}):(a.onloadend=function(){t(j.ZP.updateUserAvatar(n))},a.readAsDataURL(n))}}),(0,D.jsxs)("label",{htmlFor:"file",className:_,children:[(0,D.jsx)(g.Z,{id:"icon-edit-avatar"}),"Edit photo"]})]})})]}),(0,D.jsx)(w,{})]})}function P(){return(0,D.jsx)(k,{})}b.Z.defaults.baseURL="".concat("https://backend-team-project-pet-support.onrender.com","/api");var F="logout_logout_button__+D532",S="logout_logout_box__J-pf9",A="logout_logout_text__M3+5u";function T(){var e=(0,v.I0)();return(0,D.jsx)("div",{className:S,children:(0,D.jsxs)("button",{className:F,onClick:function(){e(j.ZP.logout())},children:[(0,D.jsx)(g.Z,{id:"icon-logout"}),(0,D.jsx)("p",{className:A,children:"Logout"})]})})}var M="pets-list_petsList_box__bIXg+",I="pets-list_petsList_photo__JyEpp",L="pets-list_petsList_text_box__Vg0+q",q="pets-list_petsList_field__+BhHE",E="pets-list_petsList_button__QczPj",U=a(543);function R(){var e=(0,v.I0)(),t=(0,v.v9)((function(e){return e.user.pets})),a=t.map((function(t){var a,n=t.name,s=t.birthday,i=t.breed,r=t.image,o=t.comments,l=t._id;return(0,D.jsxs)("li",{className:M,children:[(0,D.jsx)("img",{className:I,src:r,alt:""}),(0,D.jsxs)("div",{className:L,children:[(0,D.jsxs)("p",{className:q,children:["Name: ",n]}),(0,D.jsxs)("p",{className:q,children:["Date of birth: ",(a=s,a.slice(0,10).split("-").reverse().join("."))]}),(0,D.jsxs)("p",{className:q,children:["Breed: ",i," "]}),(0,D.jsxs)("p",{className:q,children:["Comments: ",o," "]}),(0,D.jsx)("button",{className:E,onClick:function(){return function(t){e(U.Z.deletePet(t))}(l)},type:"button",children:(0,D.jsx)(g.Z,{id:"icon-delete"})})]})]},l)}));return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)("ol",{style:{width:"100%",padding:"0"},children:a})})}var B="modaladdspet_modal__-styr",z="modaladdspet_modal__section__Su0Hj",W=a(4164),Y=document.querySelector("#modal-root"),G=function(e){var t=e.onClose,a=e.children;(0,n.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[t]);return a=n.cloneElement(a,{close:t}),(0,W.createPortal)((0,D.jsx)("div",{className:B,onClick:function(e){e.currentTarget===e.target&&t()},children:(0,D.jsx)("div",{className:z,children:a})}),Y)},H="modal-add-pet-pages_button__primary_not_main__ypj+S",K="modal-add-pet-pages_button__primary_main__6UTLB",V="modal-add-pet-pages_modalAdds_page__kFD-P",X="modal-add-pet-pages_modalAdds_page__close__-OWMm",J="modal-add-pet-pages_modalAdds_page__tittle__4VovM",O="modal-add-pet-pages_modalAdds_page__input__tw8e9",Q="modal-add-pet-pages_modalAdds_page__label__XtbYI",$="modal-add-pet-pages_modalAdds_page__button__7tqZx",ee="modal-add-pet-pages_addspet__imgInput__4dH5p",te="modal-add-pet-pages_addspet__imgLabel__qsG+d",ae="modal-add-pet-pages_add__pet__container__xobGG",ne="modal-add-pet-pages_addspetPhoto__container__ddf3R",se="modal-add-pet-pages_modalAdds_page__field__aCNSS",ie="modal-add-pet-pages_modalAdds_page_box__K2BZF",re="modal-add-pet-pages_modalAdds_commit_box__W6XU2",oe="modal-add-pet-pages_modalAdds_commit__DKD3W",le="modal-add-pet-pages_addPet__button__RnKuE",de=a(5299),ce=a(6107),ue=function(e){var t=e.close,a=(0,n.useState)(!0),s=(0,f.Z)(a,2),i=s[0],r=s[1],o=(0,n.useState)(""),l=(0,f.Z)(o,2),d=l[0],c=l[1],u=(0,n.useState)(""),m=(0,f.Z)(u,2),_=m[0],p=m[1],h=(0,n.useState)(""),x=(0,f.Z)(h,2),j=x[0],b=x[1],Z=(0,n.useState)(null),C=(0,f.Z)(Z,2),w=C[0],k=C[1],P=(0,v.v9)((function(e){return e.user.loading})),F=(0,v.I0)(),S=function(e){switch(e.currentTarget.name){case"name":c(e.currentTarget.value);break;case"breed":b(e.currentTarget.value);break;default:return}},A=function(){return r(!i)},T=new Date,M=function(e){var t=new Date(e);return"".concat(t.getDate()<10?"0".concat(t.getDate()):t.getDate(),".").concat(t.getMonth()+1<10?"0".concat(t.getMonth()+1):t.getMonth()+1,".").concat(t.getFullYear())};return(0,D.jsxs)(D.Fragment,{children:[P&&(0,D.jsx)(ce.Z,{}),(0,D.jsxs)("div",{className:V,children:[(0,D.jsx)("div",{className:X,onClick:t,children:(0,D.jsx)(g.Z,{id:"icon-close"})}),(0,D.jsx)("h3",{className:J,children:"Add pet"}),i&&(0,D.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.currentTarget.elements,a=t.name,n=t.date,s=t.breed;return c(a.value),p(n.value),b(s.value),A()},children:[(0,D.jsx)("label",{className:"".concat(Q," ").concat(ie),children:"Name pet"}),(0,D.jsx)("input",{className:O,name:"name",placeholder:"Type name pet",type:"text",required:!0,value:d,onChange:S}),(0,D.jsx)("label",{className:"".concat(Q," ").concat(ie),children:"Date of birth"}),(0,D.jsx)(y.Z,{className:O,name:"date",type:"text",placeholder:"Type date of birth",required:!0,value:_,options:{dateFormat:"d.m.Y",maxDate:"".concat(M(T))},onChange:function(e){var t=(0,f.Z)(e,1)[0];p(M(t))}}),(0,D.jsx)("label",{className:"".concat(Q," ").concat(ie),children:"Breed"}),(0,D.jsx)("input",{className:O,type:"text",name:"breed",placeholder:"Type breed",required:!0,value:j,onChange:S}),(0,D.jsxs)("div",{className:le,children:[(0,D.jsx)("button",{className:"".concat(K," ").concat($),type:"submit",children:"Next"}),(0,D.jsx)("span",{className:"".concat(H," ").concat($),onClick:t,children:"Cancel"})]})]}),!i&&(0,D.jsx)("form",{action:"",id:"book-add-form",encType:"multipart/form-data",onSubmit:function(e){e.preventDefault();var a=e.currentTarget,n=a.elements,s=n.image,i=n.comments,r=new FormData;return r.append("name",d),r.append("birthday",_),r.append("breed",j),r.append("comments",i.value),r.append("image",s.files[0]),b(""),p(""),c(""),k(null),F(U.Z.addPet(r)),a.reset(),t()},children:(0,D.jsxs)("div",{className:ae,children:[(0,D.jsx)("p",{className:se,children:"Add photo and some comments"}),(0,D.jsx)("input",{className:ee,type:"file",name:"image",accept:"image/png, image/jpeg, image/jpg, image/webp",id:"img",required:!0,title:"is required",multiple:!0,onChange:function(e){var t=new FileReader,a=e.target.files[0];if((null===a||void 0===a?void 0:a.size)>5242880)return N.Notify.warning("File is too big, please download max 5 mb!",{timeout:6e3}),void k(null);t.onloadend=function(){k(t.result)},t.readAsDataURL(a)}}),(0,D.jsx)("label",{className:te,htmlFor:"img"}),w&&(0,D.jsxs)("div",{className:ne,children:[(0,D.jsx)("p",{children:"You image:"}),(0,D.jsx)("img",{src:w,alt:"pet"})]}),(0,D.jsx)("label",{className:"".concat(Q," ").concat(re),children:"Comments"}),(0,D.jsx)("textarea",{className:oe,type:"text",name:"comments",placeholder:"Type comments",minLength:8,required:!0}),(0,D.jsxs)("div",{className:le,children:[(0,D.jsx)("button",{className:"".concat(K," ").concat($),type:"submit",onClick:function(){w||de.Report.warning("Pet Warning","Please add a photo.","Okay")},children:"Done"}),(0,D.jsx)("span",{className:"".concat(H," ").concat($),onClick:A,children:"Back"})]})]})})]})]})},me={petsData_section:"pets-data_petsData_section__UieBz",petsData_title_box:"pets-data_petsData_title_box__8HxHW",petsData_title:"pets-data_petsData_title__Qq4C7",addPetModal_buttonBox:"pets-data_addPetModal_buttonBox__HEU95",addPetModal_button:"pets-data_addPetModal_button__qP0Zy",petModal_button:"pets-data_petModal_button__sBu2c",petModal_box_btn:"pets-data_petModal_box_btn__IdO3N",petsData__container:"pets-data_petsData__container__2G1w-",overflow:"pets-data_overflow__Rtx7o"};var _e=function(){var e=(0,n.useState)(!1),t=(0,f.Z)(e,2),a=t[0],s=t[1],i=(0,v.v9)((function(e){return e.user.loading})),r=(0,v.I0)();return(0,n.useEffect)((function(){r(U.Z.getUserPet())}),[r]),(0,D.jsxs)(D.Fragment,{children:[i&&(0,D.jsx)(ce.Z,{}),(0,D.jsxs)("div",{className:me.petsData_title_box,children:[(0,D.jsx)("h2",{className:me.petsData_title,children:"My pets:"}),(0,D.jsx)("div",{className:me.addPetModal_buttonBox,children:(0,D.jsxs)("button",{className:me.addPetModal_button,type:"button",onClick:function(){s(!0),document.body.style.overflow="hidden"},children:["Add pet ",(0,D.jsx)(g.Z,{className:me.iconAddPet,id:"icon-add-pet"})]})})]}),(0,D.jsxs)("div",{className:me.petsData__container,children:[a&&(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(G,{onClose:function(){s(!1),document.body.style.overflow="visible"},children:(0,D.jsx)(ue,{})})}),(0,D.jsx)("div",{className:me.overflow,children:(0,D.jsx)(R,{})})]})]})},pe=a(5973),he="user-page_userPage_container__PYPVq",xe="user-page_userPage_section__+jTMM",fe="user-page_petsData_section__jEW1G",ge="user-page_userPage_title__bSasD",ve="user-page_userData_box__sKupV";var je=function(){return(0,D.jsx)("div",{className:he,children:(0,D.jsxs)("div",{className:pe.Z.container,children:[(0,D.jsxs)("div",{className:xe,children:[(0,D.jsx)("h2",{className:ge,children:"My information:"}),(0,D.jsxs)("div",{className:ve,children:[(0,D.jsx)(P,{}),(0,D.jsx)(T,{})]})]}),(0,D.jsx)("div",{className:fe,children:(0,D.jsx)(_e,{})})]})})}}}]);
//# sourceMappingURL=364.b1e5d009.chunk.js.map