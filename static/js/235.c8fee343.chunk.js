"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[235],{6107:function(e,t,a){a.d(t,{Z:function(){return o}});var n="loader_loading__modal__8AohZ",s=a(8966),i=a(3329),o=function(){return(0,i.jsx)("div",{className:n,children:(0,i.jsx)(s.ne,{height:"100",width:"100",color:"#F59256",ariaLabel:"hearts-loading",wrapperStyle:{},wrapperClass:"",visible:!0})})}},8235:function(e,t,a){a.r(t),a.d(t,{default:function(){return je}});var n=a(2791),s="user-data-item_userItem_container__neJio",i="user-data-item_userItem_box_yourPhoto__A6dWO",o="user-data-item_userItem_box_btnPhoto__e8bo1",r="user-data-item_userDataForm_box__UwT0M",l="user-data-item_field_box__4xcgt",d="user-data-item_userDataForm_field__32mZT",c="user-data-item_userDataForm_field_active__CXnHf",u="user-data-item_iconEdit_btn__LP-z7",m="user-data-item_userDataForm_label__oNaKJ",_="user-data-item_userItem_edit_photo__55rGT",p="user-data-item_userItem_input_edit_photo__LoxV3",h="user-data-item_userItem__yourPhoto__Xt9Av",x="user-data-item_loader__content__SyicD",f=a(9439),g=a(3220),v=a(9434),b=a(4632),j=a(3263),N=a(5264),y=(a(7621),a(9557)),Z=a(8966),D=a(3329),C="https://backend-team-project-pet-support.onrender.com";function w(){var e=(0,v.I0)(),t=(0,v.v9)((function(e){return e.auth.user})),a=(0,v.v9)((function(e){return e.auth.token})),s=(0,n.useState)(""),i=(0,f.Z)(s,2),o=i[0],_=i[1],p=(0,n.useState)(""),h=(0,f.Z)(p,2),j=h[0],w=h[1],k=(0,n.useState)(""),P=(0,f.Z)(k,2),F=P[0],S=P[1],A=(0,n.useState)(""),T=(0,f.Z)(A,2),M=T[0],I=T[1],B=(0,n.useState)(""),L=(0,f.Z)(B,2),q=L[0],E=L[1],R=(0,n.useState)(""),U=(0,f.Z)(R,2),z=U[0],W=U[1],Y=new Date,G=function(e){var t=new Date(e);return"".concat(t.getMonth()+1<10?"0".concat(t.getMonth()+1):t.getMonth()+1,".").concat(t.getDate()<10?"0".concat(t.getDate()):t.getDate(),".").concat(t.getFullYear())};(0,n.useEffect)((function(){_(!0),void 0===a?(w(t.name),S(t.email),I(void 0!==t.birthday?G(t.birthday):"00.00.0000"),E(t.phone),W(t.city),_(!1)):fetch("".concat(C,"/api/users/current"),{method:"GET",headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).then((function(e){w(e.name),S(e.email),I(void 0!==e.birthday?G(e.birthday):"00.00.0000"),E(e.phone),W(e.city),_(!1)})).catch((function(e){console.log(e),_(!1)}))}),[t,a]);var H=function(e){switch(e.currentTarget.name){case"name":w(e.currentTarget.value);break;case"email":S(e.currentTarget.value);break;case"phone":E(e.currentTarget.value);break;case"city":W(e.currentTarget.value);break;default:return}},K=(0,n.useState)(""),V=(0,f.Z)(K,2),X=V[0],J=V[1],O=function(e){if(X===e)return J("");J(e)},Q=function(e){return X===e?(0,D.jsx)(g.Z,{id:"icon-done"}):(0,D.jsx)(g.Z,{id:"icon-edit-active"})};return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)("div",{className:r,children:o?(0,D.jsx)(D.Fragment,{children:(0,D.jsx)("div",{className:x,children:(0,D.jsx)(Z.iT,{height:80,width:80,color:"#F59256",wrapperStyle:{},wrapperClass:"",visible:!0,ariaLabel:"oval-loading",secondaryColor:"#F59256",strokeWidth:2,strokeWidthSecondary:2})})}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.name;if(a.disabled)return a.value?e(b.ZP.updateUser({name:a.value})):N.Notify.failure("Required!",{timeout:5e3})},children:(0,D.jsxs)("div",{className:l,children:[(0,D.jsx)("label",{className:m,children:"Name:"}),X&&"name"===X?(0,D.jsx)("input",{onChange:H,type:"name",name:"name",value:j,className:c}):(0,D.jsx)("input",{onChange:H,type:"name",name:"name",value:j,disabled:!0,className:d}),(0,D.jsx)("button",{className:u,onClick:function(){return O("name")},type:"submit",children:X?Q("name"):(0,D.jsx)(g.Z,{id:"icon-edit"})})]})}),(0,D.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.email;if(a.disabled)return a.value?/^((([0-9A-Za-z]{1}[-0-9A-z]{1,}[0-9A-Za-z]{1}))@([-0-9A-Za-z]{1,}\.){1,2}[-A-Za-z]{2,})$/i.test(a.value)&&a.value.length<36?e(b.ZP.updateUser({email:a.value})):N.Notify.failure("Invalid email address!",{timeout:5e3}):N.Notify.failure("Required!",{timeout:5e3})},children:(0,D.jsxs)("div",{className:l,children:[(0,D.jsx)("label",{className:m,children:"Email:"}),X&&"email"===X?(0,D.jsx)("input",{onChange:H,type:"email",name:"email",value:F,className:c}):(0,D.jsx)("input",{onChange:H,type:"email",name:"email",value:F,disabled:!0,className:d}),(0,D.jsx)("button",{className:u,onClick:function(){return O("email")},children:X?Q("email"):(0,D.jsx)(g.Z,{id:"icon-edit"})})]})}),(0,D.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.birthday;if(a.disabled)return a.value?e(b.ZP.updateUser({birthday:a.value})):N.Notify.failure("Required!",{timeout:5e3})},children:(0,D.jsxs)("div",{className:l,children:[(0,D.jsx)("label",{className:m,children:"Birthday:"}),X&&"birthday"===X?(0,D.jsx)(y.Z,{options:{dateFormat:"m.d.Y",maxDate:"".concat(G(Y))},onChange:function(e){var t=(0,f.Z)(e,1)[0];I(G(t))},type:"text",name:"birthday",value:M,className:c}):(0,D.jsx)(y.Z,{options:{dateFormat:"m.d.Y",maxDate:"".concat(G(Y))},onChange:function(e){var t=(0,f.Z)(e,1)[0];I(G(t))},type:"text",name:"birthday",value:M,disabled:!0,className:d}),(0,D.jsx)("button",{className:u,onClick:function(){return O("birthday")},children:X?Q("birthday"):(0,D.jsx)(g.Z,{id:"icon-edit"})})]})}),(0,D.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.phone;if(a.disabled)return a.value?12!==a.value.length?N.Notify.failure("Is not correct format, must 380xxxxxxxxx!",{timeout:5e3}):/^3?[\s]?8?[\s]?\(?0\d{2}?\)?[\s]?\d{3}[\s|-]?\d{2}[\s|-]?\d{2}$/.test(a.value)?e(b.ZP.updateUser({phone:a.value})):N.Notify.failure("Is not correct format, must 380xxxxxxxxx!",{timeout:5e3}):N.Notify.failure("Required!",{timeout:5e3})},children:(0,D.jsxs)("div",{className:l,children:[(0,D.jsx)("label",{className:m,children:"Phone:"}),X&&"phone"===X?(0,D.jsx)("input",{onChange:H,type:"tel",name:"phone",value:q,className:c}):(0,D.jsx)("input",{onChange:H,type:"tel",name:"phone",value:q,disabled:!0,className:d}),(0,D.jsx)("button",{className:u,onClick:function(){return O("phone")},type:"submit",children:X?Q("phone"):(0,D.jsx)(g.Z,{id:"icon-edit"})})]})}),(0,D.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.city;if(a.disabled)return a.value?/^[aA-zZ]/.test(a.value)?e(b.ZP.updateUser({city:a.value})):N.Notify.failure("Is not correct format, must only letters!",{timeout:5e3}):N.Notify.failure("Required!",{timeout:5e3})},children:(0,D.jsxs)("div",{className:l,children:[(0,D.jsx)("label",{className:m,children:"City:"}),X&&"city"===X?(0,D.jsx)("input",{onChange:H,type:"text",name:"city",value:z,className:c}):(0,D.jsx)("input",{onChange:H,type:"text",name:"city",value:z,disabled:!0,className:d}),(0,D.jsx)("button",{className:u,onClick:function(){return O("city")},children:X?Q("city"):(0,D.jsx)(g.Z,{id:"icon-edit"})})]})})]})})})}j.Z.defaults.baseURL="".concat(C,"/api");function k(){var e=(0,v.v9)((function(e){return e.auth.user})),t=((0,v.v9)((function(e){return e.auth.token})),(0,v.I0)());return(0,D.jsxs)("div",{className:s,children:[(0,D.jsxs)("div",{className:i,children:[(0,D.jsx)("img",{className:h,src:e.avatar?e.avatar:"https://dummyimage.com/150x150/FDF7F2.gif&text=Add+your+photo!",alt:""}),(0,D.jsx)("div",{className:o,children:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("input",{className:p,type:"file",name:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",id:"file",onChange:function(e){var a=new FileReader,n=e.target.files[0];(null===n||void 0===n?void 0:n.size)>5242880?N.Notify.warning("File is too big, please download max 5 mb!",{timeout:5e3}):(a.onloadend=function(){t(b.ZP.updateUserAvatar(n))},a.readAsDataURL(n))}}),(0,D.jsxs)("label",{htmlFor:"file",className:_,children:[(0,D.jsx)(g.Z,{id:"icon-edit-avatar"}),"Edit photo"]})]})})]}),(0,D.jsx)(w,{})]})}function P(){return(0,D.jsx)(k,{})}j.Z.defaults.baseURL="".concat("https://backend-team-project-pet-support.onrender.com","/api");var F="logout_logout_button__+D532",S="logout_logout_box__J-pf9",A="logout_logout_text__M3+5u";function T(){var e=(0,v.I0)();return(0,D.jsx)("div",{className:S,children:(0,D.jsxs)("button",{className:F,onClick:function(){e(b.ZP.logout())},children:[(0,D.jsx)(g.Z,{id:"icon-logout"}),(0,D.jsx)("p",{className:A,children:"Logout"})]})})}var M="pets-list_petsList_box__bIXg+",I="pets-list_petsList_photo__JyEpp",B="pets-list_petsList_text_box__Vg0+q",L="pets-list_petsList_field__+BhHE",q="pets-list_petsList_button__QczPj",E=a(543),R=a(1328);function U(){var e=(0,v.I0)(),t=(0,v.v9)((function(e){return e.user.pets})),a=t.map((function(t){var a,n=t.name,s=t.birthday,i=t.breed,o=t.image,r=t.comments,l=t._id;return(0,D.jsxs)("li",{className:M,children:[(0,D.jsx)("img",{className:I,src:o,alt:""}),(0,D.jsxs)("div",{className:B,children:[(0,D.jsxs)("p",{className:L,children:["Name: ",n]}),(0,D.jsxs)("p",{className:L,children:["Date of birth: ",(a=s,a.slice(0,10).split("-").reverse().join("."))]}),(0,D.jsxs)("p",{className:L,children:["Breed: ",i," "]}),(0,D.jsxs)("p",{className:L,children:["Comments: ",r," "]}),(0,D.jsx)("button",{className:q,onClick:function(){return function(t){R.Confirm.show("","Are you sure you want to delete your petcard?","Yes","No",(function(){e(E.Z.deletePet(t))}),(function(){}),{messageFontSize:"20px",borderRadius:"8px",cssAnimationStyle:"zoom",okButtonColor:"#ffffff",okButtonBackground:"#eebb9c",cancelButtonColor:"#ffffff",cancelButtonBackground:"#F59256"})}(l)},type:"button",children:(0,D.jsx)(g.Z,{id:"icon-delete"})})]})]},l)}));return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)("ol",{style:{width:"100%",padding:"0"},children:a})})}var z="modaladdspet_modal__-styr",W="modaladdspet_modal__section__Su0Hj",Y=a(4164),G=document.querySelector("#modal-root"),H=function(e){var t=e.onClose,a=e.children;(0,n.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[t]);return a=n.cloneElement(a,{close:t}),(0,Y.createPortal)((0,D.jsx)("div",{className:z,onClick:function(e){e.currentTarget===e.target&&t()},children:(0,D.jsx)("div",{className:W,children:a})}),G)},K="modal-add-pet-pages_button__primary_not_main__ypj+S",V="modal-add-pet-pages_button__primary_main__6UTLB",X="modal-add-pet-pages_modalAdds_page__kFD-P",J="modal-add-pet-pages_modalAdds_page__close__-OWMm",O="modal-add-pet-pages_modalAdds_page__tittle__4VovM",Q="modal-add-pet-pages_modalAdds_page__input__tw8e9",$="modal-add-pet-pages_modalAdds_page__label__XtbYI",ee="modal-add-pet-pages_modalAdds_page__button__7tqZx",te="modal-add-pet-pages_addspet__imgInput__4dH5p",ae="modal-add-pet-pages_addspet__imgLabel__qsG+d",ne="modal-add-pet-pages_add__pet__container__xobGG",se="modal-add-pet-pages_addspetPhoto__container__ddf3R",ie="modal-add-pet-pages_modalAdds_page__field__aCNSS",oe="modal-add-pet-pages_modalAdds_page_box__K2BZF",re="modal-add-pet-pages_modalAdds_commit_box__W6XU2",le="modal-add-pet-pages_modalAdds_commit__DKD3W",de="modal-add-pet-pages_addPet__button__RnKuE",ce=a(5299),ue=a(6107),me=function(e){var t=e.close,a=(0,n.useState)(!0),s=(0,f.Z)(a,2),i=s[0],o=s[1],r=(0,n.useState)(""),l=(0,f.Z)(r,2),d=l[0],c=l[1],u=(0,n.useState)(""),m=(0,f.Z)(u,2),_=m[0],p=m[1],h=(0,n.useState)(""),x=(0,f.Z)(h,2),b=x[0],j=x[1],Z=(0,n.useState)(null),C=(0,f.Z)(Z,2),w=C[0],k=C[1],P=(0,v.v9)((function(e){return e.user.loading})),F=(0,v.I0)(),S=function(e){switch(e.currentTarget.name){case"name":c(e.currentTarget.value);break;case"breed":j(e.currentTarget.value);break;default:return}},A=function(){return o(!i)},T=new Date,M=function(e){var t=new Date(e);return"".concat(t.getMonth()+1<10?"0".concat(t.getMonth()+1):t.getMonth()+1,".").concat(t.getDate()<10?"0".concat(t.getDate()):t.getDate(),".").concat(t.getFullYear())};return(0,D.jsxs)(D.Fragment,{children:[P&&(0,D.jsx)(ue.Z,{}),(0,D.jsxs)("div",{className:X,children:[(0,D.jsx)("div",{className:J,onClick:t,children:(0,D.jsx)(g.Z,{id:"icon-close"})}),(0,D.jsx)("h3",{className:O,children:"Add pet"}),i&&(0,D.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.currentTarget.elements,a=t.name,n=t.date,s=t.breed;return c(a.value),p(n.value),j(s.value),A()},children:[(0,D.jsx)("label",{className:"".concat($," ").concat(oe),children:"Name pet"}),(0,D.jsx)("input",{className:Q,name:"name",placeholder:"Type name pet",type:"text",required:!0,value:d,onChange:S}),(0,D.jsx)("label",{className:"".concat($," ").concat(oe),children:"Date of birth"}),(0,D.jsx)(y.Z,{className:Q,name:"date",type:"text",placeholder:"Type date of birth",required:!0,value:_,options:{dateFormat:"m.d.Y",maxDate:"".concat(M(T))},onChange:function(e){var t=(0,f.Z)(e,1)[0];p(M(t))}}),(0,D.jsx)("label",{className:"".concat($," ").concat(oe),children:"Breed"}),(0,D.jsx)("input",{className:Q,type:"text",name:"breed",placeholder:"Type breed",required:!0,value:b,onChange:S}),(0,D.jsxs)("div",{className:de,children:[(0,D.jsx)("button",{className:"".concat(V," ").concat(ee),type:"submit",children:"Next"}),(0,D.jsx)("span",{className:"".concat(K," ").concat(ee),onClick:t,children:"Cancel"})]})]}),!i&&(0,D.jsx)("form",{action:"",id:"book-add-form",encType:"multipart/form-data",onSubmit:function(e){e.preventDefault();var a=e.currentTarget,n=a.elements,s=n.image,i=n.comments,o=new FormData;return o.append("name",d),o.append("birthday",_),o.append("breed",b),o.append("comments",i.value),o.append("image",s.files[0]),j(""),p(""),c(""),k(null),F(E.Z.addPet(o)),a.reset(),t()},children:(0,D.jsxs)("div",{className:ne,children:[(0,D.jsx)("p",{className:ie,children:"Add photo and some comments"}),(0,D.jsx)("input",{className:te,type:"file",name:"image",accept:"image/png, image/jpeg, image/jpg, image/webp",id:"img",required:!0,title:"is required",multiple:!0,onChange:function(e){var t=new FileReader,a=e.target.files[0];if((null===a||void 0===a?void 0:a.size)>5242880)return N.Notify.warning("File is too big, please download max 5 mb!",{timeout:6e3}),void k(null);t.onloadend=function(){k(t.result)},t.readAsDataURL(a)}}),(0,D.jsx)("label",{className:ae,htmlFor:"img"}),w&&(0,D.jsxs)("div",{className:se,children:[(0,D.jsx)("p",{children:"You image:"}),(0,D.jsx)("img",{src:w,alt:"pet"})]}),(0,D.jsx)("label",{className:"".concat($," ").concat(re),children:"Comments"}),(0,D.jsx)("textarea",{className:le,type:"text",name:"comments",placeholder:"Type comments",minLength:8,required:!0}),(0,D.jsxs)("div",{className:de,children:[(0,D.jsx)("button",{className:"".concat(V," ").concat(ee),type:"submit",onClick:function(){w||ce.Report.warning("Pet Warning","Please add a photo.","Okay")},children:"Done"}),(0,D.jsx)("span",{className:"".concat(K," ").concat(ee),onClick:A,children:"Back"})]})]})})]})]})},_e={petsData_section:"pets-data_petsData_section__UieBz",petsData_title_box:"pets-data_petsData_title_box__8HxHW",petsData_title:"pets-data_petsData_title__Qq4C7",addPetModal_buttonBox:"pets-data_addPetModal_buttonBox__HEU95",addPetModal_button:"pets-data_addPetModal_button__qP0Zy",petModal_button:"pets-data_petModal_button__sBu2c",petModal_box_btn:"pets-data_petModal_box_btn__IdO3N",petsData__container:"pets-data_petsData__container__2G1w-",overflow:"pets-data_overflow__Rtx7o"};var pe=function(){var e=(0,n.useState)(!1),t=(0,f.Z)(e,2),a=t[0],s=t[1],i=(0,v.v9)((function(e){return e.user.loading})),o=(0,v.I0)();return(0,n.useEffect)((function(){o(E.Z.getUserPet())}),[o]),(0,D.jsxs)(D.Fragment,{children:[i&&(0,D.jsx)(ue.Z,{}),(0,D.jsxs)("div",{className:_e.petsData_title_box,children:[(0,D.jsx)("h2",{className:_e.petsData_title,children:"My pets:"}),(0,D.jsx)("div",{className:_e.addPetModal_buttonBox,children:(0,D.jsxs)("button",{className:_e.addPetModal_button,type:"button",onClick:function(){s(!0),document.body.style.overflow="hidden"},children:["Add pet ",(0,D.jsx)(g.Z,{className:_e.iconAddPet,id:"icon-add-pet"})]})})]}),(0,D.jsxs)("div",{className:_e.petsData__container,children:[a&&(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(H,{onClose:function(){s(!1),document.body.style.overflow="visible"},children:(0,D.jsx)(me,{})})}),(0,D.jsx)("div",{className:_e.overflow,children:(0,D.jsx)(U,{})})]})]})},he=a(5973),xe="user-page_userPage_container__PYPVq",fe="user-page_userPage_section__+jTMM",ge="user-page_petsData_section__jEW1G",ve="user-page_userPage_title__bSasD",be="user-page_userData_box__sKupV";var je=function(){return(0,D.jsx)("div",{className:xe,children:(0,D.jsxs)("div",{className:he.Z.container,children:[(0,D.jsxs)("div",{className:fe,children:[(0,D.jsx)("h2",{className:ve,children:"My information:"}),(0,D.jsxs)("div",{className:be,children:[(0,D.jsx)(P,{}),(0,D.jsx)(T,{})]})]}),(0,D.jsx)("div",{className:ge,children:(0,D.jsx)(pe,{})})]})})}}}]);
//# sourceMappingURL=235.c8fee343.chunk.js.map