"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[738],{1412:function(e,t,a){a.d(t,{Z:function(){return r}});var n="loader_loading__modal__7RGsW",s=a(8966),o=a(3329),r=function(){return(0,o.jsx)("div",{className:n,children:(0,o.jsx)(s.ne,{height:"100",width:"100",color:"#F59256",ariaLabel:"hearts-loading",wrapperStyle:{},wrapperClass:"",visible:!0})})}},7738:function(e,t,a){a.r(t),a.d(t,{default:function(){return be}});var n=a(2791),s=a(5861),o=a(9439),r=a(4687),i=a.n(r),l="user-data-item_userItem_container__u5vUT",d="user-data-item_userItem_box_yourPhoto__O21-t",c="user-data-item_userItem_box_btnPhoto__yNXBh",u="user-data-item_userDataForm_box__ju9ym",m="user-data-item_field_box__9l0Iv",_="user-data-item_userDataForm_field__FCANy",p="user-data-item_userDataForm_field_active__wGZIm",h="user-data-item_iconEdit_btn__SlIzK",x="user-data-item_userDataForm_label__L0Yyc",v="user-data-item_userItem_edit_photo__s9s0l",f="user-data-item_userItem_input_edit_photo__iTH95",g="user-data-item_userItem__yourPhoto__kEFXo",b=a(5233),j=a(9434),N=a(215),y=a(3263),D=a(5264),Z=a(3329),w="https://backend-team-project-pet-support.onrender.com";function C(){var e=(0,j.I0)(),t=(0,j.v9)((function(e){return e.auth.user})),a=(0,n.useState)(""),s=(0,o.Z)(a,2),r=s[0],i=s[1],l=(0,n.useState)(""),d=(0,o.Z)(l,2),c=d[0],v=d[1],f=(0,n.useState)(""),g=(0,o.Z)(f,2),y=g[0],C=g[1],k=(0,n.useState)(""),P=(0,o.Z)(k,2),M=P[0],Y=P[1],T=(0,n.useState)(""),F=(0,o.Z)(T,2),S=F[0],A=F[1],I=function(e){var t=new Date(e);return"".concat(t.getMonth()+1<10?"0".concat(t.getMonth()+1):t.getMonth()+1,".").concat(t.getDate()<10?"0".concat(t.getDate()):t.getDate(),".").concat(t.getFullYear())};(0,n.useEffect)((function(){void 0===t.token?(i(t.name),v(t.email),C(void 0!==t.birthday?I(t.birthday):"00.00.0000"),Y(t.phone),A(t.city)):fetch("".concat(w,"/api/users/current"),{method:"GET",headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){return e.json()})).then((function(e){i(e.name),v(e.email),C(void 0!==e.birthday?I(e.birthday):"00.00.0000"),console.log("data.birt",e.birthday),Y(e.phone),A(e.city)})).catch((function(e){return console.log(e)}))}),[t]);var L=function(e){switch(e.currentTarget.name){case"name":i(e.currentTarget.value);break;case"birthday":C(e.currentTarget.value);break;case"email":v(e.currentTarget.value);break;case"phone":Y(e.currentTarget.value);break;case"city":A(e.currentTarget.value);break;default:return}},U=(0,n.useState)(""),R=(0,o.Z)(U,2),E=R[0],q=R[1],z=function(e){if(E===e)return q("");q(e)},B=function(e){return E===e?(0,Z.jsx)(b.Z,{id:"icon-done"}):(0,Z.jsx)(b.Z,{id:"icon-edit-active"})};return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)("div",{className:u,children:[(0,Z.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.name;return a.value?e(N.ZP.updateUser({name:a.value})):D.Notify.failure("Required!",{timeout:5e3})},children:(0,Z.jsxs)("div",{className:m,children:[(0,Z.jsx)("label",{className:x,children:"Name:"}),E&&"name"===E?(0,Z.jsx)("input",{onChange:L,type:"name",name:"name",value:r,className:p}):(0,Z.jsx)("input",{onChange:L,type:"name",name:"name",value:r,disabled:!0,className:_}),(0,Z.jsx)("button",{className:h,onClick:function(){return z("name")},children:E?B("name"):(0,Z.jsx)(b.Z,{id:"icon-edit"})})]})}),(0,Z.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.email;return a.value?/^((([0-9A-Za-z]{1}[-0-9A-z]{1,}[0-9A-Za-z]{1}))@([-0-9A-Za-z]{1,}\.){1,2}[-A-Za-z]{2,})$/i.test(a.value)&&a.value.length<36?e(N.ZP.updateUser({email:a.value})):D.Notify.failure("Invalid email address!",{timeout:5e3}):D.Notify.failure("Required!",{timeout:5e3})},children:(0,Z.jsxs)("div",{className:m,children:[(0,Z.jsx)("label",{className:x,children:"Email:"}),E&&"email"===E?(0,Z.jsx)("input",{onChange:L,type:"email",name:"email",value:c,className:p}):(0,Z.jsx)("input",{onChange:L,type:"email",name:"email",value:c,disabled:!0,className:_}),(0,Z.jsx)("button",{className:h,onClick:function(){return z("email")},children:E?B("email"):(0,Z.jsx)(b.Z,{id:"icon-edit"})})]})}),(0,Z.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.birthday;return a.value?/[0-9./-]$/.test(a.value)?e(N.ZP.updateUser({birthday:a.value})):D.Notify.failure("Invalid data, must MM.DD.YYYY!",{timeout:5e3}):D.Notify.failure("Required!",{timeout:5e3})},children:(0,Z.jsxs)("div",{className:m,children:[(0,Z.jsx)("label",{className:x,children:"Birthday:"}),E&&"birthday"===E?(0,Z.jsx)("input",{onChange:L,onClick:function(){return D.Notify.warning("The birthday format should be MM.DD.YYYY",{timeout:5e3})},type:"text",name:"birthday",value:y,className:p}):(0,Z.jsx)("input",{onChange:L,onClick:function(){return D.Notify.warning("The birthday format should be MM.DD.YYYY",{timeout:1e4})},type:"text",name:"birthday",value:y,disabled:!0,className:_}),(0,Z.jsx)("button",{className:h,onClick:function(){return z("birthday")},children:E?B("birthday"):(0,Z.jsx)(b.Z,{id:"icon-edit"})})]})}),(0,Z.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.phone;return a.value?12!==a.value.length?D.Notify.failure("Is not correct format, must 380xxxxxxxxx!",{timeout:5e3}):/^3?[\s]?8?[\s]?\(?0\d{2}?\)?[\s]?\d{3}[\s|-]?\d{2}[\s|-]?\d{2}$/.test(a.value)?e(N.ZP.updateUser({phone:a.value})):D.Notify.failure("Is not correct format, must 380xxxxxxxxx!",{timeout:5e3}):D.Notify.failure("Required!",{timeout:5e3})},children:(0,Z.jsxs)("div",{className:m,children:[(0,Z.jsx)("label",{className:x,children:"Phone:"}),E&&"phone"===E?(0,Z.jsx)("input",{onChange:L,type:"tel",name:"phone",value:M,className:p}):(0,Z.jsx)("input",{onChange:L,type:"tel",name:"phone",value:M,disabled:!0,className:_}),(0,Z.jsx)("button",{className:h,onClick:function(){return z("phone")},type:"submit",children:E?B("phone"):(0,Z.jsx)(b.Z,{id:"icon-edit"})})]})}),(0,Z.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.city;return a.value?/^[aA-zZ]/.test(a.value)?e(N.ZP.updateUser({city:a.value})):D.Notify.failure("Is not correct format, must only letters!",{timeout:5e3}):D.Notify.failure("Required!",{timeout:5e3})},children:(0,Z.jsxs)("div",{className:m,children:[(0,Z.jsx)("label",{className:x,children:"City:"}),E&&"city"===E?(0,Z.jsx)("input",{onChange:L,type:"text",name:"city",value:S,className:p}):(0,Z.jsx)("input",{onChange:L,type:"text",name:"city",value:S,disabled:!0,className:_}),(0,Z.jsx)("button",{className:h,onClick:function(){return z("city")},children:E?B("city"):(0,Z.jsx)(b.Z,{id:"icon-edit"})})]})})]})})}y.Z.defaults.baseURL="".concat(w,"/api");var k=a(7496);function P(){var e=(0,j.v9)((function(e){return e.auth.user})),t=(0,j.v9)((function(e){return e.user.avatar})),a=(0,j.I0)(),r="https://dummyimage.com/150x150/FDF7F2.gif&text=Add+your+photo!",u=(0,n.useState)(),m=(0,o.Z)(u,2),_=m[0],p=m[1];console.log(_);var h=(0,n.useState)(e.avatarURL?e.avatarURL:r),x=(0,o.Z)(h,2),w=x[0],P=x[1],M=t||r;(0,n.useEffect)((function(){var e=function(){var e=(0,s.Z)(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.Z.get("/users/current");case 2:null!==(t=e.sent)&&void 0!==t&&t.data&&a((0,k.w)(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.avatarURL));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[a]);return(0,Z.jsxs)("div",{className:l,children:[(0,Z.jsxs)("div",{className:d,children:[(0,Z.jsx)("img",{className:g,src:M,alt:""}),(0,Z.jsx)("div",{className:c,children:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("input",{className:f,type:"file",name:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",id:"file",onChange:function(t){var n=new FileReader,s=t.target.files[0];if((null===s||void 0===s?void 0:s.size)>5242880)return D.Notify.warning("File is too big, please download max 5 mb!",{timeout:5e3}),void P(r);n.onloadend=function(){p(s),P(n.result)},console.log(s),void 0!==e.token?(n.readAsDataURL(s),window.localStorage.setItem("avatar",w)):(localStorage.removeItem("avatar"),n.readAsDataURL(s),window.localStorage.setItem("avatar",w),a(N.ZP.updateUserAvatar(s)))}}),(0,Z.jsxs)("label",{htmlFor:"file",className:v,children:[(0,Z.jsx)(b.Z,{id:"icon-edit-avatar"}),"Edit photo"]})]})})]}),(0,Z.jsx)(C,{})]})}function M(){return(0,Z.jsx)(P,{})}y.Z.defaults.baseURL="".concat("https://backend-team-project-pet-support.onrender.com","/api");var Y="logout_logout_button__TBMpQ",T="logout_logout_box__4Y-0G",F="logout_logout_text__URKBZ";function S(){var e=(0,j.I0)();return(0,Z.jsx)("div",{className:T,children:(0,Z.jsxs)("button",{className:Y,onClick:function(){e(N.ZP.logout())},children:[(0,Z.jsx)(b.Z,{id:"icon-logout"}),(0,Z.jsx)("p",{className:F,children:"Logout"})]})})}var A="pets-list_petsList_box__r-L3C",I="pets-list_petsList_photo__ylXlZ",L="pets-list_petsList_text_box__9PvtL",U="pets-list_petsList_field__9oWdr",R="pets-list_petsList_button__9bARw";function E(e){var t=e.pets,a=(0,j.I0)(),n=t.map((function(e){var t,n=e.name,s=e.birthday,o=e.breed,r=e.image,i=e.comments,l=e._id;return(0,Z.jsxs)("li",{className:A,children:[(0,Z.jsx)("img",{className:I,src:r,alt:""}),(0,Z.jsxs)("div",{className:L,children:[(0,Z.jsxs)("p",{className:U,children:["Name: ",n]}),(0,Z.jsxs)("p",{className:U,children:["Date of birth: ",(t=s,t.slice(0,10).split("-").reverse().join("."))]}),(0,Z.jsxs)("p",{className:U,children:["Breed: ",o," "]}),(0,Z.jsxs)("p",{className:U,children:["Comments: ",i," "]}),(0,Z.jsx)("button",{className:R,onClick:function(){return function(e){a(N.ZP.deletePet(e))}(l)},type:"button",children:(0,Z.jsx)(b.Z,{id:"icon-delete"})})]})]},l)}));return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("ol",{style:{width:"100%",padding:"0"},children:n})})}var q="modaladdspet_modal__FTN7U",z="modaladdspet_modal__section__9qFhR",B=a(4164),G=document.querySelector("#modal-root"),K=function(e){var t=e.onClose,a=e.children;(0,n.useEffect)((function(){var e=function(e){"Escape"===e.code&&(t(),console.log("close in Escape"))};return console.log("modal open"),window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[t]);return a=n.cloneElement(a,{close:t}),(0,B.createPortal)((0,Z.jsx)("div",{className:q,onClick:function(e){e.currentTarget===e.target&&t()},children:(0,Z.jsx)("div",{className:z,children:a})}),G)},O="modal-add-pet-pages_button__primary_not_main__oeOUn",Q="modal-add-pet-pages_button__primary_main__Cfb0I",V="modal-add-pet-pages_modalAdds_page__hjxeN",W="modal-add-pet-pages_modalAdds_page__close__V0v0b",$="modal-add-pet-pages_modalAdds_page__tittle__zzUlh",H="modal-add-pet-pages_modalAdds_page__input__BEYda",J="modal-add-pet-pages_modalAdds_page__label__K56y5",X="modal-add-pet-pages_modalAdds_page__button__oDmI8",ee="modal-add-pet-pages_addspet__imgInput__vtca0",te="modal-add-pet-pages_addspet__imgLabel__F8fBQ",ae="modal-add-pet-pages_add__pet__container__Q1JMw",ne="modal-add-pet-pages_addspetPhoto__container__8jL2+",se="modal-add-pet-pages_modalAdds_page__field__xVcHI",oe="modal-add-pet-pages_modalAdds_page_box__-ZMZt",re="modal-add-pet-pages_modalAdds_commit_box__CCH4p",ie="modal-add-pet-pages_modalAdds_commit__oz+LP",le="modal-add-pet-pages_addPet__button__wJivU",de=a(5299),ce=a(1412),ue=function(e){var t=e.close,a=(0,n.useState)(!0),s=(0,o.Z)(a,2),r=s[0],i=s[1],l=(0,n.useState)(""),d=(0,o.Z)(l,2),c=d[0],u=d[1],m=(0,n.useState)(""),_=(0,o.Z)(m,2),p=_[0],h=_[1],x=(0,n.useState)(""),v=(0,o.Z)(x,2),f=v[0],g=v[1],y=(0,n.useState)(null),w=(0,o.Z)(y,2),C=w[0],k=w[1],P=(0,j.v9)((function(e){return e.user.loading})),M=(0,j.I0)(),Y=function(e){switch(e.currentTarget.name){case"name":u(e.currentTarget.value);break;case"date":h(e.currentTarget.value);break;case"breed":g(e.currentTarget.value);break;default:return}},T=function(){return i(!r)},F=new Date,S="".concat(F.getDate()<10?"0".concat(F.getDate()):F.getDate(),".").concat(F.getMonth()<10?"0".concat(F.getMonth()+1):F.getMonth()+1,".").concat(F.getFullYear());return(0,Z.jsxs)(Z.Fragment,{children:[P&&(0,Z.jsx)(ce.Z,{}),(0,Z.jsxs)("div",{className:V,children:[(0,Z.jsx)("div",{className:W,onClick:t,children:(0,Z.jsx)(b.Z,{id:"icon-close"})}),(0,Z.jsx)("h3",{className:$,children:"Add pet"}),r&&(0,Z.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.currentTarget.elements,a=t.name,n=t.date,s=t.breed;return u(a.value),h(n.value),g(s.value),console.log(f),new Date(p)>=new Date(S)?de.Report.info("Pet Info","Please choose a date no later than today.","Okay"):T()},children:[(0,Z.jsx)("label",{className:"".concat(J," ").concat(oe),children:"Name pet"}),(0,Z.jsx)("input",{className:H,name:"name",placeholder:"Type name pet",type:"text",required:!0,value:c,onChange:Y}),(0,Z.jsx)("label",{className:"".concat(J," ").concat(oe),children:"Date of birth"}),(0,Z.jsx)("input",{className:H,name:"date",type:"text",pattern:"^(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\\d\\d$",title:"Date must be in the format: DD.MM.YYYY or DD/MM/YYYY or DD-MM-YYYY",placeholder:"Type date of birth",required:!0,value:p,onChange:Y}),(0,Z.jsx)("label",{className:"".concat(J," ").concat(oe),children:"Breed"}),(0,Z.jsx)("input",{className:H,type:"text",name:"breed",placeholder:"Type breed",required:!0,value:f,onChange:Y}),(0,Z.jsxs)("div",{className:le,children:[(0,Z.jsx)("button",{className:"".concat(Q," ").concat(X),type:"submit",children:"Next"}),(0,Z.jsx)("span",{className:"".concat(O," ").concat(X),onClick:t,children:"Cancel"})]})]}),!r&&(0,Z.jsx)("form",{action:"",id:"book-add-form",encType:"multipart/form-data",onSubmit:function(e){e.preventDefault();var a=e.currentTarget,n=a.elements,s=n.image,o=n.comments,r=new FormData;return r.append("name",c),r.append("birthday",p),r.append("breed",f),r.append("comments",o.value),r.append("image",s.files[0]),console.log(s.files[0]),console.log("yyyy"),g(""),h(""),u(""),k(null),M(N.ZP.addPet(r)),a.reset(),t()},children:(0,Z.jsxs)("div",{className:ae,children:[(0,Z.jsx)("p",{className:se,children:"Add photo and some comments"}),(0,Z.jsx)("input",{className:ee,type:"file",name:"image",accept:"image/png, image/jpeg, image/jpg, image/webp",id:"img",required:!0,title:"is required",multiple:!0,onChange:function(e){var t=new FileReader,a=e.target.files[0];if((null===a||void 0===a?void 0:a.size)>5242880)return D.Notify.warning("File is too big, please download max 5 mb!",{timeout:6e3}),void k(null);t.onloadend=function(){k(t.result)},t.readAsDataURL(a)}}),(0,Z.jsx)("label",{className:te,htmlFor:"img"}),C&&(0,Z.jsxs)("div",{className:ne,children:[(0,Z.jsx)("p",{children:"You image:"}),(0,Z.jsx)("img",{src:C,alt:"pet"})]}),(0,Z.jsx)("label",{className:"".concat(J," ").concat(re),children:"Comments"}),(0,Z.jsx)("textarea",{className:ie,type:"text",name:"comments",placeholder:"Type comments",minLength:8,required:!0}),(0,Z.jsxs)("div",{className:le,children:[(0,Z.jsx)("button",{className:"".concat(Q," ").concat(X),type:"submit",onClick:function(){C||de.Report.warning("Pet Warning","Please add a photo.","Okay")},children:"Done"}),(0,Z.jsx)("span",{className:"".concat(O," ").concat(X),onClick:T,children:"Back"})]})]})})]})]})},me={petsData_section:"pets-data_petsData_section__KnLGE",petsData_title_box:"pets-data_petsData_title_box__2KDvf",petsData_title:"pets-data_petsData_title__N8Uii",addPetModal_buttonBox:"pets-data_addPetModal_buttonBox__tzYJO",addPetModal_button:"pets-data_addPetModal_button__Yse2n",petModal_button:"pets-data_petModal_button__uZQMN",petModal_box_btn:"pets-data_petModal_box_btn__buP-L",petsData__container:"pets-data_petsData__container__kYFZw",overflow:"pets-data_overflow__TptSZ"};var _e=function(){var e=(0,n.useState)(!1),t=(0,o.Z)(e,2),a=t[0],s=t[1],r=(0,j.v9)((function(e){return e.user.pets})),i=(0,j.v9)((function(e){return e.user.loading})),l=(0,j.I0)();return(0,n.useEffect)((function(){l(N.ZP.getUserPet())}),[l]),(0,Z.jsxs)(Z.Fragment,{children:[i&&(0,Z.jsx)(ce.Z,{}),(0,Z.jsxs)("div",{className:me.petsData_title_box,children:[(0,Z.jsx)("h2",{className:me.petsData_title,children:"My pets:"}),(0,Z.jsx)("div",{className:me.addPetModal_buttonBox,children:(0,Z.jsxs)("button",{className:me.addPetModal_button,type:"button",onClick:function(){s(!0),document.body.style.overflow="hidden"},children:["Add pet ",(0,Z.jsx)(b.Z,{className:me.iconAddPet,id:"icon-add-pet"})]})})]}),(0,Z.jsxs)("div",{className:me.petsData__container,children:[a&&(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(K,{onClose:function(){s(!1),document.body.style.overflow="visible"},children:(0,Z.jsx)(ue,{})})}),(0,Z.jsx)("div",{className:me.overflow,children:(0,Z.jsx)(E,{pets:r})})]})]})},pe=a(5973),he="user-page_userPage_container__PYPVq",xe="user-page_userPage_section__+jTMM",ve="user-page_petsData_section__jEW1G",fe="user-page_userPage_title__bSasD",ge="user-page_userData_box__sKupV";var be=function(){return(0,Z.jsx)("div",{className:he,children:(0,Z.jsxs)("div",{className:pe.Z.container,children:[(0,Z.jsxs)("div",{className:xe,children:[(0,Z.jsx)("h2",{className:fe,children:"My information:"}),(0,Z.jsxs)("div",{className:ge,children:[(0,Z.jsx)(M,{}),(0,Z.jsx)(S,{})]})]}),(0,Z.jsx)("div",{className:ve,children:(0,Z.jsx)(_e,{})})]})})}}}]);
//# sourceMappingURL=738.c8518159.chunk.js.map