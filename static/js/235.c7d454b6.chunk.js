"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[235],{6107:function(e,t,a){a.d(t,{Z:function(){return r}});var n="loader_loading__modal__8AohZ",s=a(8966),i=a(3329),r=function(){return(0,i.jsx)("div",{className:n,children:(0,i.jsx)(s.ne,{height:"100",width:"100",color:"#F59256",ariaLabel:"hearts-loading",wrapperStyle:{},wrapperClass:"",visible:!0})})}},8235:function(e,t,a){a.r(t),a.d(t,{default:function(){return fe}});var n=a(2791),s="user-data-item_userItem_container__neJio",i="user-data-item_userItem_box_yourPhoto__A6dWO",r="user-data-item_userItem_box_btnPhoto__e8bo1",o="user-data-item_userDataForm_box__UwT0M",l="user-data-item_field_box__4xcgt",d="user-data-item_userDataForm_field__32mZT",c="user-data-item_userDataForm_field_active__CXnHf",u="user-data-item_iconEdit_btn__LP-z7",m="user-data-item_userDataForm_label__oNaKJ",_="user-data-item_userItem_edit_photo__55rGT",p="user-data-item_userItem_input_edit_photo__LoxV3",h="user-data-item_userItem__yourPhoto__Xt9Av",x=a(9439),f=a(3220),g=a(9434),v=a(4632),b=a(3263),j=a(5264),N=a(3329),y="https://backend-team-project-pet-support.onrender.com";function D(){var e=(0,g.I0)(),t=(0,g.v9)((function(e){return e.auth.user})),a=(0,g.v9)((function(e){return e.auth.token})),s=(0,n.useState)(""),i=(0,x.Z)(s,2),r=i[0],_=i[1],p=(0,n.useState)(""),h=(0,x.Z)(p,2),b=h[0],D=h[1],Z=(0,n.useState)(""),C=(0,x.Z)(Z,2),k=C[0],w=C[1],P=(0,n.useState)(""),M=(0,x.Z)(P,2),T=M[0],Y=M[1],A=(0,n.useState)(""),S=(0,x.Z)(A,2),F=S[0],I=S[1],q=function(e){var t=new Date(e);return"".concat(t.getMonth()+1<10?"0".concat(t.getMonth()+1):t.getMonth()+1,".").concat(t.getDate()<10?"0".concat(t.getDate()):t.getDate(),".").concat(t.getFullYear())};(0,n.useEffect)((function(){void 0===a?(_(t.name),D(t.email),w(void 0!==t.birthday?q(t.birthday):"00.00.0000"),Y(t.phone),I(t.city)):fetch("".concat(y,"/api/users/current"),{method:"GET",headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).then((function(e){_(e.name),D(e.email),w(void 0!==e.birthday?q(e.birthday):"00.00.0000"),Y(e.phone),I(e.city)})).catch((function(e){return console.log(e)}))}),[t,a]);var L=function(e){switch(e.currentTarget.name){case"name":_(e.currentTarget.value);break;case"birthday":w(e.currentTarget.value);break;case"email":D(e.currentTarget.value);break;case"phone":Y(e.currentTarget.value);break;case"city":I(e.currentTarget.value);break;default:return}},E=(0,n.useState)(""),R=(0,x.Z)(E,2),U=R[0],B=R[1],z=function(e){if(U===e)return B("");B(e)},G=function(e){return U===e?(0,N.jsx)(f.Z,{id:"icon-done"}):(0,N.jsx)(f.Z,{id:"icon-edit-active"})};return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:o,children:[(0,N.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.name;return a.value?e(v.ZP.updateUser({name:a.value})):j.Notify.failure("Required!",{timeout:5e3})},children:(0,N.jsxs)("div",{className:l,children:[(0,N.jsx)("label",{className:m,children:"Name:"}),U&&"name"===U?(0,N.jsx)("input",{onChange:L,type:"name",name:"name",value:r,className:c}):(0,N.jsx)("input",{onChange:L,type:"name",name:"name",value:r,disabled:!0,className:d}),(0,N.jsx)("button",{className:u,onClick:function(){return z("name")},children:U?G("name"):(0,N.jsx)(f.Z,{id:"icon-edit"})})]})}),(0,N.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.email;return a.value?/^((([0-9A-Za-z]{1}[-0-9A-z]{1,}[0-9A-Za-z]{1}))@([-0-9A-Za-z]{1,}\.){1,2}[-A-Za-z]{2,})$/i.test(a.value)&&a.value.length<36?e(v.ZP.updateUser({email:a.value})):j.Notify.failure("Invalid email address!",{timeout:5e3}):j.Notify.failure("Required!",{timeout:5e3})},children:(0,N.jsxs)("div",{className:l,children:[(0,N.jsx)("label",{className:m,children:"Email:"}),U&&"email"===U?(0,N.jsx)("input",{onChange:L,type:"email",name:"email",value:b,className:c}):(0,N.jsx)("input",{onChange:L,type:"email",name:"email",value:b,disabled:!0,className:d}),(0,N.jsx)("button",{className:u,onClick:function(){return z("email")},children:U?G("email"):(0,N.jsx)(f.Z,{id:"icon-edit"})})]})}),(0,N.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.birthday;return a.value?/[0-9./-]$/.test(a.value)?e(v.ZP.updateUser({birthday:a.value})):j.Notify.failure("Invalid data, must MM.DD.YYYY!",{timeout:5e3}):j.Notify.failure("Required!",{timeout:5e3})},children:(0,N.jsxs)("div",{className:l,children:[(0,N.jsx)("label",{className:m,children:"Birthday:"}),U&&"birthday"===U?(0,N.jsx)("input",{onChange:L,onClick:function(){return j.Notify.warning("The birthday format should be MM.DD.YYYY",{timeout:5e3})},type:"text",name:"birthday",value:k,className:c}):(0,N.jsx)("input",{onChange:L,onClick:function(){return j.Notify.warning("The birthday format should be MM.DD.YYYY",{timeout:1e4})},type:"text",name:"birthday",value:k,disabled:!0,className:d}),(0,N.jsx)("button",{className:u,onClick:function(){return z("birthday")},children:U?G("birthday"):(0,N.jsx)(f.Z,{id:"icon-edit"})})]})}),(0,N.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.phone;return a.value?12!==a.value.length?j.Notify.failure("Is not correct format, must 380xxxxxxxxx!",{timeout:5e3}):/^3?[\s]?8?[\s]?\(?0\d{2}?\)?[\s]?\d{3}[\s|-]?\d{2}[\s|-]?\d{2}$/.test(a.value)?e(v.ZP.updateUser({phone:a.value})):j.Notify.failure("Is not correct format, must 380xxxxxxxxx!",{timeout:5e3}):j.Notify.failure("Required!",{timeout:5e3})},children:(0,N.jsxs)("div",{className:l,children:[(0,N.jsx)("label",{className:m,children:"Phone:"}),U&&"phone"===U?(0,N.jsx)("input",{onChange:L,type:"tel",name:"phone",value:T,className:c}):(0,N.jsx)("input",{onChange:L,type:"tel",name:"phone",value:T,disabled:!0,className:d}),(0,N.jsx)("button",{className:u,onClick:function(){return z("phone")},type:"submit",children:U?G("phone"):(0,N.jsx)(f.Z,{id:"icon-edit"})})]})}),(0,N.jsx)("form",{onSubmit:function(t){t.preventDefault();var a=t.currentTarget.elements.city;return a.value?/^[aA-zZ]/.test(a.value)?e(v.ZP.updateUser({city:a.value})):j.Notify.failure("Is not correct format, must only letters!",{timeout:5e3}):j.Notify.failure("Required!",{timeout:5e3})},children:(0,N.jsxs)("div",{className:l,children:[(0,N.jsx)("label",{className:m,children:"City:"}),U&&"city"===U?(0,N.jsx)("input",{onChange:L,type:"text",name:"city",value:F,className:c}):(0,N.jsx)("input",{onChange:L,type:"text",name:"city",value:F,disabled:!0,className:d}),(0,N.jsx)("button",{className:u,onClick:function(){return z("city")},children:U?G("city"):(0,N.jsx)(f.Z,{id:"icon-edit"})})]})})]})})}b.Z.defaults.baseURL="".concat(y,"/api");function Z(){var e=(0,g.v9)((function(e){return e.auth.user})),t=((0,g.v9)((function(e){return e.auth.token})),(0,g.I0)());return(0,N.jsxs)("div",{className:s,children:[(0,N.jsxs)("div",{className:i,children:[(0,N.jsx)("img",{className:h,src:e.avatar?e.avatar:"https://dummyimage.com/150x150/FDF7F2.gif&text=Add+your+photo!",alt:""}),(0,N.jsx)("div",{className:r,children:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("input",{className:p,type:"file",name:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",id:"file",onChange:function(e){var a=new FileReader,n=e.target.files[0];(null===n||void 0===n?void 0:n.size)>5242880?j.Notify.warning("File is too big, please download max 5 mb!",{timeout:5e3}):(a.onloadend=function(){t(v.ZP.updateUserAvatar(n))},a.readAsDataURL(n))}}),(0,N.jsxs)("label",{htmlFor:"file",className:_,children:[(0,N.jsx)(f.Z,{id:"icon-edit-avatar"}),"Edit photo"]})]})})]}),(0,N.jsx)(D,{})]})}function C(){return(0,N.jsx)(Z,{})}b.Z.defaults.baseURL="".concat("https://backend-team-project-pet-support.onrender.com","/api");var k="logout_logout_button__+D532",w="logout_logout_box__J-pf9",P="logout_logout_text__M3+5u";function M(){var e=(0,g.I0)();return(0,N.jsx)("div",{className:w,children:(0,N.jsxs)("button",{className:k,onClick:function(){e(v.ZP.logout())},children:[(0,N.jsx)(f.Z,{id:"icon-logout"}),(0,N.jsx)("p",{className:P,children:"Logout"})]})})}var T="pets-list_petsList_box__bIXg+",Y="pets-list_petsList_photo__JyEpp",A="pets-list_petsList_text_box__Vg0+q",S="pets-list_petsList_field__+BhHE",F="pets-list_petsList_button__QczPj",I=a(543);function q(){var e=(0,g.I0)(),t=(0,g.v9)((function(e){return e.user.pets})),a=t.map((function(t){var a,n=t.name,s=t.birthday,i=t.breed,r=t.image,o=t.comments,l=t._id;return(0,N.jsxs)("li",{className:T,children:[(0,N.jsx)("img",{className:Y,src:r,alt:""}),(0,N.jsxs)("div",{className:A,children:[(0,N.jsxs)("p",{className:S,children:["Name: ",n]}),(0,N.jsxs)("p",{className:S,children:["Date of birth: ",(a=s,a.slice(0,10).split("-").reverse().join("."))]}),(0,N.jsxs)("p",{className:S,children:["Breed: ",i," "]}),(0,N.jsxs)("p",{className:S,children:["Comments: ",o," "]}),(0,N.jsx)("button",{className:F,onClick:function(){return function(t){e(I.Z.deletePet(t))}(l)},type:"button",children:(0,N.jsx)(f.Z,{id:"icon-delete"})})]})]},l)}));return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("ol",{style:{width:"100%",padding:"0"},children:a})})}var L="modaladdspet_modal__-styr",E="modaladdspet_modal__section__Su0Hj",R=a(4164),U=document.querySelector("#modal-root"),B=function(e){var t=e.onClose,a=e.children;(0,n.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[t]);return a=n.cloneElement(a,{close:t}),(0,R.createPortal)((0,N.jsx)("div",{className:L,onClick:function(e){e.currentTarget===e.target&&t()},children:(0,N.jsx)("div",{className:E,children:a})}),U)},z="modal-add-pet-pages_button__primary_not_main__ypj+S",G="modal-add-pet-pages_button__primary_main__6UTLB",H="modal-add-pet-pages_modalAdds_page__kFD-P",W="modal-add-pet-pages_modalAdds_page__close__-OWMm",K="modal-add-pet-pages_modalAdds_page__tittle__4VovM",O="modal-add-pet-pages_modalAdds_page__input__tw8e9",V="modal-add-pet-pages_modalAdds_page__label__XtbYI",X="modal-add-pet-pages_modalAdds_page__button__7tqZx",J="modal-add-pet-pages_addspet__imgInput__4dH5p",$="modal-add-pet-pages_addspet__imgLabel__qsG+d",Q="modal-add-pet-pages_add__pet__container__xobGG",ee="modal-add-pet-pages_addspetPhoto__container__ddf3R",te="modal-add-pet-pages_modalAdds_page__field__aCNSS",ae="modal-add-pet-pages_modalAdds_page_box__K2BZF",ne="modal-add-pet-pages_modalAdds_commit_box__W6XU2",se="modal-add-pet-pages_modalAdds_commit__DKD3W",ie="modal-add-pet-pages_addPet__button__RnKuE",re=a(5299),oe=a(6107),le=function(e){var t=e.close,a=(0,n.useState)(!0),s=(0,x.Z)(a,2),i=s[0],r=s[1],o=(0,n.useState)(""),l=(0,x.Z)(o,2),d=l[0],c=l[1],u=(0,n.useState)(""),m=(0,x.Z)(u,2),_=m[0],p=m[1],h=(0,n.useState)(""),v=(0,x.Z)(h,2),b=v[0],y=v[1],D=(0,n.useState)(null),Z=(0,x.Z)(D,2),C=Z[0],k=Z[1],w=(0,g.v9)((function(e){return e.user.loading})),P=(0,g.I0)(),M=function(e){switch(e.currentTarget.name){case"name":c(e.currentTarget.value);break;case"date":p(e.currentTarget.value);break;case"breed":y(e.currentTarget.value);break;default:return}},T=function(){return r(!i)},Y=new Date,A="".concat(Y.getDate()<10?"0".concat(Y.getDate()):Y.getDate(),".").concat(Y.getMonth()<10?"0".concat(Y.getMonth()+1):Y.getMonth()+1,".").concat(Y.getFullYear());return(0,N.jsxs)(N.Fragment,{children:[w&&(0,N.jsx)(oe.Z,{}),(0,N.jsxs)("div",{className:H,children:[(0,N.jsx)("div",{className:W,onClick:t,children:(0,N.jsx)(f.Z,{id:"icon-close"})}),(0,N.jsx)("h3",{className:K,children:"Add pet"}),i&&(0,N.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.currentTarget.elements,a=t.name,n=t.date,s=t.breed;return c(a.value),p(n.value),y(s.value),new Date(_)>=new Date(A)?re.Report.info("Pet Info","Please choose a date no later than today.","Okay"):T()},children:[(0,N.jsx)("label",{className:"".concat(V," ").concat(ae),children:"Name pet"}),(0,N.jsx)("input",{className:O,name:"name",placeholder:"Type name pet",type:"text",required:!0,value:d,onChange:M}),(0,N.jsx)("label",{className:"".concat(V," ").concat(ae),children:"Date of birth"}),(0,N.jsx)("input",{className:O,name:"date",type:"text",pattern:"^(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\\d\\d$",title:"Date must be in the format: DD.MM.YYYY or DD/MM/YYYY or DD-MM-YYYY",placeholder:"Type date of birth",required:!0,value:_,onChange:M}),(0,N.jsx)("label",{className:"".concat(V," ").concat(ae),children:"Breed"}),(0,N.jsx)("input",{className:O,type:"text",name:"breed",placeholder:"Type breed",required:!0,value:b,onChange:M}),(0,N.jsxs)("div",{className:ie,children:[(0,N.jsx)("button",{className:"".concat(G," ").concat(X),type:"submit",children:"Next"}),(0,N.jsx)("span",{className:"".concat(z," ").concat(X),onClick:t,children:"Cancel"})]})]}),!i&&(0,N.jsx)("form",{action:"",id:"book-add-form",encType:"multipart/form-data",onSubmit:function(e){e.preventDefault();var a=e.currentTarget,n=a.elements,s=n.image,i=n.comments,r=new FormData;return r.append("name",d),r.append("birthday",_),r.append("breed",b),r.append("comments",i.value),r.append("image",s.files[0]),y(""),p(""),c(""),k(null),P(I.Z.addPet(r)),a.reset(),t()},children:(0,N.jsxs)("div",{className:Q,children:[(0,N.jsx)("p",{className:te,children:"Add photo and some comments"}),(0,N.jsx)("input",{className:J,type:"file",name:"image",accept:"image/png, image/jpeg, image/jpg, image/webp",id:"img",required:!0,title:"is required",multiple:!0,onChange:function(e){var t=new FileReader,a=e.target.files[0];if((null===a||void 0===a?void 0:a.size)>5242880)return j.Notify.warning("File is too big, please download max 5 mb!",{timeout:6e3}),void k(null);t.onloadend=function(){k(t.result)},t.readAsDataURL(a)}}),(0,N.jsx)("label",{className:$,htmlFor:"img"}),C&&(0,N.jsxs)("div",{className:ee,children:[(0,N.jsx)("p",{children:"You image:"}),(0,N.jsx)("img",{src:C,alt:"pet"})]}),(0,N.jsx)("label",{className:"".concat(V," ").concat(ne),children:"Comments"}),(0,N.jsx)("textarea",{className:se,type:"text",name:"comments",placeholder:"Type comments",minLength:8,required:!0}),(0,N.jsxs)("div",{className:ie,children:[(0,N.jsx)("button",{className:"".concat(G," ").concat(X),type:"submit",onClick:function(){C||re.Report.warning("Pet Warning","Please add a photo.","Okay")},children:"Done"}),(0,N.jsx)("span",{className:"".concat(z," ").concat(X),onClick:T,children:"Back"})]})]})})]})]})},de={petsData_section:"pets-data_petsData_section__UieBz",petsData_title_box:"pets-data_petsData_title_box__8HxHW",petsData_title:"pets-data_petsData_title__Qq4C7",addPetModal_buttonBox:"pets-data_addPetModal_buttonBox__HEU95",addPetModal_button:"pets-data_addPetModal_button__qP0Zy",petModal_button:"pets-data_petModal_button__sBu2c",petModal_box_btn:"pets-data_petModal_box_btn__IdO3N",petsData__container:"pets-data_petsData__container__2G1w-",overflow:"pets-data_overflow__Rtx7o"};var ce=function(){var e=(0,n.useState)(!1),t=(0,x.Z)(e,2),a=t[0],s=t[1],i=(0,g.v9)((function(e){return e.user.loading})),r=(0,g.I0)();return(0,n.useEffect)((function(){r(I.Z.getUserPet())}),[r]),(0,N.jsxs)(N.Fragment,{children:[i&&(0,N.jsx)(oe.Z,{}),(0,N.jsxs)("div",{className:de.petsData_title_box,children:[(0,N.jsx)("h2",{className:de.petsData_title,children:"My pets:"}),(0,N.jsx)("div",{className:de.addPetModal_buttonBox,children:(0,N.jsxs)("button",{className:de.addPetModal_button,type:"button",onClick:function(){s(!0),document.body.style.overflow="hidden"},children:["Add pet ",(0,N.jsx)(f.Z,{className:de.iconAddPet,id:"icon-add-pet"})]})})]}),(0,N.jsxs)("div",{className:de.petsData__container,children:[a&&(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(B,{onClose:function(){s(!1),document.body.style.overflow="visible"},children:(0,N.jsx)(le,{})})}),(0,N.jsx)("div",{className:de.overflow,children:(0,N.jsx)(q,{})})]})]})},ue=a(5973),me="user-page_userPage_container__PYPVq",_e="user-page_userPage_section__+jTMM",pe="user-page_petsData_section__jEW1G",he="user-page_userPage_title__bSasD",xe="user-page_userData_box__sKupV";var fe=function(){return(0,N.jsx)("div",{className:me,children:(0,N.jsxs)("div",{className:ue.Z.container,children:[(0,N.jsxs)("div",{className:_e,children:[(0,N.jsx)("h2",{className:he,children:"My information:"}),(0,N.jsxs)("div",{className:xe,children:[(0,N.jsx)(C,{}),(0,N.jsx)(M,{})]})]}),(0,N.jsx)("div",{className:pe,children:(0,N.jsx)(ce,{})})]})})}}}]);
//# sourceMappingURL=235.c7d454b6.chunk.js.map