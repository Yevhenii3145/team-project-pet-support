"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[543],{4480:function(e,t,n){n.r(t),n.d(t,{default:function(){return re}});var o=n(9439),i=n(7689),c=n(9434),a="notices-category-list_card_list__4IPGY",_=n(5861),s=n(4687),l=n.n(s),r=n(2791),m=n(1087),d=n(4851),u=n(5264),f=n(1328),h="notice-category-item_card_item__uexVC",x="notice-category-item_card_img__58IEw",p="notice-category-item_card_info__AzLhT",j="notice-category-item_card_info_title__LWqOq",y="notice-category-item_card_info_list__2gR+T",N="notice-category-item_card_info_item__QoL9B",v="notice-category-item_card_info_item_text__MNBZM",g="notice-category-item_card_info_item_link__D6AhA",b="notice-category-item_add_to_favorite_btn__T0Qwy",w="notice-category-item_add_to_favorite_btn_active__INR4C",k="notice-category-item_box_btn__x86Ci",C="notice-category-item_learn_more_btn__dO2pq",L="notice-category-item_delete_btn__P2w14",P="notice-category-item_card_text__sHq7p",Z=n(3220),E=n(6132),z=n(1212),D="modal_modal__bONGM",B="modal_modal__section__Fz897",F=n(4164),I=n(3329),O=document.querySelector("#modal-root"),A=function(e){var t=e.onClose,n=e.children;(0,r.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[t]);return(0,F.createPortal)((0,I.jsx)("div",{className:D,onClick:function(e){e.currentTarget===e.target&&t()},children:(0,I.jsx)("div",{className:B,children:n})}),O)},S={button__primary_not_main:"modal-notice_button__primary_not_main__pcm6D",button__primary_main:"modal-notice_button__primary_main__h9uiK",button__secondary:"modal-notice_button__secondary__F3afp",button__secondary_active:"modal-notice_button__secondary_active__0fwvg",button__learn:"modal-notice_button__learn__lQ06I",modal_notice__button_favorite:"modal-notice_modal_notice__button_favorite__cdzVY",modal_notice__content:"modal-notice_modal_notice__content__kkOz+",modal_notice__close:"modal-notice_modal_notice__close__+4iyR",modal_notice__image_content:"modal-notice_modal_notice__image_content__4Plvt",modal_notice__image:"modal-notice_modal_notice__image__PT9wD",modal_notice__category:"modal-notice_modal_notice__category__G+poE",modal_notice__title:"modal-notice_modal_notice__title__YzmOb",modal_notice__list:"modal-notice_modal_notice__list__ndXYX",modal_notice__item:"modal-notice_modal_notice__item__oieYh",modal_notice__item_title:"modal-notice_modal_notice__item_title__8hbiX",modal_notice__item_description:"modal-notice_modal_notice__item_description__FOGaP",modal_notice__item_description_link:"modal-notice_modal_notice__item_description_link__7ZLaz",modal_notice__item_comment:"modal-notice_modal_notice__item_comment__Dj+qE",modal_notice__button_container:"modal-notice_modal_notice__button_container__wHtlH",modal_notice__button:"modal-notice_modal_notice__button__zP4Dy",modal_notice__content_info:"modal-notice_modal_notice__content_info__8IKqs"},Y=n(6107),T=n(9313),q=function(e){var t=e.id,n=e.onClose,o=e.onAddDelete,i=e.categoryNotice,a=e.favorite,_=e.deleteNotice,s=(0,c.v9)((function(e){return e.notices.loading})),l=(0,c.v9)((function(e){return e.notices.notice})),r=(0,c.v9)((function(e){return e.auth.user.userId})),d=(0,z.Z)(),u=(0,c.I0)();return(0,I.jsx)(I.Fragment,{children:s?(0,I.jsx)(Y.Z,{}):(0,I.jsx)(I.Fragment,{children:null!==l&&(0,I.jsxs)("div",{className:S.modal_notice__content,children:[(0,I.jsxs)("div",{className:S.modal_notice__content_info,children:[(0,I.jsx)("div",{className:S.modal_notice__close,onClick:n,children:(0,I.jsx)(Z.Z,{id:"icon-close"})}),(0,I.jsxs)("div",{className:S.modal_notice__image_content,children:[(0,I.jsx)("img",{className:S.modal_notice__image,src:l.image,alt:l.name}),(0,I.jsx)("span",{className:S.modal_notice__category,children:i(l.category)})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("h3",{className:S.modal_notice__title,children:l.title}),(0,I.jsxs)("ul",{className:S.modal_notice__list,children:[(0,I.jsxs)("li",{className:S.modal_notice__item,children:[(0,I.jsx)("h4",{className:S.modal_notice__item_title,children:"Name:"}),(0,I.jsx)("p",{className:S.modal_notice__item_description,children:l.name})]}),(0,I.jsxs)("li",{className:S.modal_notice__item,children:[(0,I.jsx)("h4",{className:S.modal_notice__item_title,children:"Birthday:"}),(0,I.jsx)("p",{className:S.modal_notice__item_description,children:function(e){var t=new Date(e);return"".concat(t.getMonth()+1<10?"0".concat(t.getMonth()+1):t.getMonth()+1,".").concat(t.getDate()<10?"0".concat(t.getDate()):t.getDate(),".").concat(t.getFullYear())}(l.birthday)})]}),(0,I.jsxs)("li",{className:S.modal_notice__item,children:[(0,I.jsx)("h4",{className:S.modal_notice__item_title,children:"Breed:"}),(0,I.jsx)("p",{className:S.modal_notice__item_description,children:l.breed})]}),(0,I.jsxs)("li",{className:S.modal_notice__item,children:[(0,I.jsx)("h4",{className:S.modal_notice__item_title,children:"Location:"}),(0,I.jsx)("p",{className:S.modal_notice__item_description,children:l.location})]}),(0,I.jsxs)("li",{className:S.modal_notice__item,children:[(0,I.jsx)("h4",{className:S.modal_notice__item_title,children:"The sex:"}),(0,I.jsx)("p",{className:S.modal_notice__item_description,children:l.sex})]}),(0,I.jsxs)("li",{className:S.modal_notice__item,children:[(0,I.jsx)("h4",{className:S.modal_notice__item_title,children:"Email:"}),(0,I.jsx)("a",{href:"mailto:".concat(l.owner.email),className:"".concat(S.modal_notice__item_description," ").concat(S.modal_notice__item_description_link),type:"button",children:l.owner.email})]}),(0,I.jsxs)("li",{className:S.modal_notice__item,children:[(0,I.jsx)("h4",{className:S.modal_notice__item_title,children:"Phone:"}),(0,I.jsx)("a",{href:"tel:+".concat(l.owner.phone),className:"".concat(S.modal_notice__item_description," ").concat(S.modal_notice__item_description_link),type:"button",children:"+".concat(l.owner.phone)})]}),"In good hands"!==l.category&&(0,I.jsxs)("li",{className:S.modal_notice__item,children:[(0,I.jsx)("h4",{className:S.modal_notice__item_title,children:"Price:"}),(0,I.jsx)("p",{className:S.modal_notice__item_description,children:l.price})]}),(0,I.jsxs)("li",{className:S.modal_notice__item,children:[(0,I.jsx)("h4",{className:S.modal_notice__item_title,children:"Owner:"}),(0,I.jsxs)(m.rU,{to:l.owner._id===r?"/user":"/user/".concat(l.owner._id),onClick:function(){l.owner._id!==r?(document.body.style.overflow="visible",u((0,T.B)(l.owner._id),(0,T.H)(l.owner._id))):document.body.style.overflow="visible"},className:"".concat(S.modal_notice__item_description," ").concat(S.modal_notice__item_description_link),children:[l.owner.name," \u2199"]})]})]})]})]}),(0,I.jsxs)("article",{className:S.modal_notice__item_comment,children:[(0,I.jsx)("span",{className:S.modal_notice__item_title,children:"Comments:"}),l.comments]}),(0,I.jsxs)("div",{className:S.modal_notice__button_container,children:[(0,I.jsx)("a",{href:"tel:+".concat(l.phone),className:"".concat(S.button__primary_main," ").concat(S.modal_notice__button," ").concat(S.modal_notice__button_contact),type:"button",children:"Contact"}),(0,I.jsxs)("button",{onClick:function(){o(t)},className:"".concat(S.button__primary_not_main," ").concat(S.modal_notice__button),type:"button",children:[a?"Remove":"Add to",(0,I.jsx)(Z.Z,{className:S.modal_notice__button_favorite,id:"icon-heart-favorite"})]}),d&&r===l.owner._id&&(0,I.jsxs)("button",{type:"button",className:"".concat(S.button__primary_not_main," ").concat(S.modal_notice__button),onClick:function(){return _(l.owner_id)},children:["Delete",(0,I.jsx)(Z.Z,{id:"icon-delete-notice"})]})]})]})})})},M=function(e){var t=e.pet,n=e.value,i=t._id,a=t.image,s=t.title,D=t.breed,B=t.location,F=t.birthday,O=t.price,S=t.category,Y=t.owner,M=(0,r.useState)(!1),R=(0,o.Z)(M,2),H=R[0],Q=R[1],W=(0,c.I0)(),U=(0,z.Z)(),G=(0,c.v9)((function(e){return e.auth.user.userId})),V=(0,c.v9)((function(e){return e.notices.favoriteNotices})),X=(0,c.v9)((function(e){return e.filter})),K=(0,r.useState)(!1),J=(0,o.Z)(K,2),$=J[0],ee=J[1];(0,r.useEffect)((function(){V.length>0&&V.map((function(e){return e._id===i&&ee(!0)}))}),[V,W,i]);var te=function(){var e=(0,_.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=5;break}return u.Notify.failure("You need authorization"),e.abrupt("return");case 5:if($){e.next=12;break}if(null!==X){e.next=10;break}return W((0,E.x8)(t)),ee(!0),e.abrupt("return");case 10:e.next=17;break;case 12:if(!$){e.next=17;break}return e.next=15,W((0,E.QR)(t));case 15:ee(!1),W((0,E.wz)(n));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ne(){Q(!1),document.body.style.overflow="visible"}var oe=function(e){f.Confirm.show("","Are you sure you want to delete notis?","Yes","No",(function(){W((0,E.Zt)(e))}),(function(){}),{messageFontSize:"20px",borderRadius:"8px",cssAnimationStyle:"zoom",okButtonColor:"#ffffff",okButtonBackground:"#eebb9c",cancelButtonColor:"#ffffff",cancelButtonBackground:"#F59256"})},ie=(0,d.Z)(new Date,new Date(F)),ce=function(e){return"for-free"===e&&(e="in good hands"),"lost-found"===e&&(e="lost/found"),e};return(0,I.jsxs)(I.Fragment,{children:[H&&(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(A,{onClose:ne,children:(0,I.jsx)(q,{id:t._id,onClose:ne,onAddDelete:te,categoryNotice:ce,favorite:$,deleteNotice:oe})})}),(0,I.jsxs)("li",{className:h,children:[(0,I.jsx)("img",{src:a,alt:"pet",className:x}),(0,I.jsxs)("div",{className:p,children:[(0,I.jsx)("h3",{className:j,children:s}),(0,I.jsxs)("ul",{className:y,children:[(0,I.jsxs)("li",{className:N,children:[(0,I.jsx)("p",{className:v,children:"Breed:"}),(0,I.jsx)("p",{children:D||"no information"})]}),(0,I.jsxs)("li",{className:N,children:[(0,I.jsx)("p",{className:v,children:"Place:"}),(0,I.jsx)("p",{children:B.split(", ")[0]})]}),(0,I.jsxs)("li",{className:N,children:[(0,I.jsx)("p",{className:v,children:"Age:"}),(0,I.jsx)("p",{children:ie})]}),"sell"===S&&(0,I.jsxs)("li",{className:N,children:[(0,I.jsx)("p",{className:v,children:"Price:"}),(0,I.jsx)("p",{children:O})]}),(0,I.jsxs)("li",{className:N,children:[(0,I.jsx)("p",{className:v,children:"Owner:"}),(0,I.jsxs)(m.rU,{to:Y._id===G?"/user":"/user/".concat(Y._id),onClick:function(){Y._id!==G&&W((0,T.B)(Y._id),(0,T.H)(Y._id))},className:g,"data-action":"owner",children:[Y.name," \u2199"]})]})]}),(0,I.jsxs)("div",{className:k,children:[(0,I.jsx)("button",{type:"button",className:C,onClick:function(){document.body.style.overflow="hidden",Q(!0),W((0,E.U)(t._id))},children:"Learn more"}),U&&G===Y._id&&(0,I.jsxs)("button",{type:"button",className:L,onClick:function(){return oe(i)},children:["Delete",(0,I.jsx)(Z.Z,{id:"icon-delete-notice"})]}),(0,I.jsx)("button",{onClick:function(){return te(i)},type:"button",className:$?"".concat(b," ").concat(w):b,children:(0,I.jsx)(Z.Z,{id:"icon-heart"})})]}),(0,I.jsx)("p",{className:P,children:ce(S)})]})]})]})},R=function(e){var t=e.pets,n=e.data;return(0,I.jsx)("ul",{className:a,children:t.map((function(e){return(0,I.jsx)(M,{pet:e,value:n},e._id)}))})},H=function(e){var t=e.notices;return{loading:t.loading,error:t.error}},Q=function(e){return e.notices.items},W=function(e){return e.notices.totalNotices},U=n(9038);var G=n.p+"static/media/cat_for_empty_favorite_list.56f5c52ca27d63a15669c79edd286ff5.svg",V="empty-favorite-list_emptyPetsList_wrap__lhB6y",X="empty-favorite-list_emptyPetsList_box__XHrTU",K="empty-favorite-list_emptyPetsList_img__c6kJ7",J="empty-favorite-list_emptyPetsList_text__l4DBR";function $(){return(0,I.jsx)("div",{className:V,children:(0,I.jsxs)("div",{className:X,children:[(0,I.jsx)("img",{className:K,src:G,alt:"cat"}),(0,I.jsxs)("p",{className:J,children:["Add your favorite animals ",(0,I.jsx)("br",{})," so as not to lose"]})]})})}var ee=n(8277),te="empty-own-list_emptyPetsList_wrap__22VQV",ne="empty-own-list_emptyPetsList_box__SnSAh",oe="empty-own-list_emptyPetsList_img__vjtFC",ie="empty-own-list_emptyPetsList_text__rc19C";function ce(){return(0,I.jsx)("div",{className:te,children:(0,I.jsxs)("div",{className:ne,children:[(0,I.jsx)("img",{className:oe,src:ee.Z,alt:"cat"}),(0,I.jsxs)("p",{className:ie,children:["You haven`t added any ",(0,I.jsx)("br",{})," animals to your list yet"]})]})})}var ae="load-more_buttonLoad__5ocen",_e=n(5667),se=function(e){var t=e.scroll,n=e.changePage;return(0,I.jsxs)("div",{onClick:function(){return t()},children:[(0,I.jsx)("button",{type:"button",className:ae,onClick:function(){return n((function(e){return e+1}))},children:"Load more..."}),(0,I.jsx)(_e.W_,{className:"element",name:"scroll-to-element"})]})},le=n(1081),re=function(){var e=(0,c.I0)(),t=(0,i.UO)().categoryName,n=(0,c.v9)(Q),a=(0,c.v9)(U.z),_=(0,c.v9)(W),s=(0,c.v9)(H),l=s.loading,m=s.error,d=(0,z.Z)(),f=(0,r.useState)(1),h=(0,o.Z)(f,2),x=h[0],p=h[1],j=(0,r.useState)("sell"),y=(0,o.Z)(j,2),N=y[0],v=y[1],g=(0,r.useMemo)((function(){return{categoryName:(N===t||(v(t),p(1)),N),page:x,limit:8}}),[t,x,8,N]);(0,r.useEffect)((function(){e((0,le.x)([t,x]))}),[t,x,e]),(0,r.useEffect)((function(){_e.zW.scrollEvent.register("begin",(function(){console.log("begin",arguments)})),_e.zW.scrollEvent.register("end",(function(){console.log("end",arguments)}))}),[]),(0,r.useEffect)((function(){return function(){_e.zW.scrollEvent.remove("begin"),_e.zW.scrollEvent.remove("end")}})),(0,r.useEffect)((function(){d&&e((0,E.EE)()),e((0,E.wz)(g))}),[e,d,g]);return(0,I.jsxs)(I.Fragment,{children:[l&&(0,I.jsx)(Y.Z,{}),"own"===t&&0===n.length&&(0,I.jsx)(ce,{}),"favorite"===t&&0===n.length&&(0,I.jsx)($,{}),n.length>0&&(0,I.jsx)(R,{pets:function(){if(!a)return n;var e=a.toLocaleLowerCase();return n.filter((function(t){return t.title.toLocaleLowerCase().includes(e)}))}(),data:g}),_/8>x?(0,I.jsx)(se,{scroll:function(){_e.OK.scrollTo("scroll-to-element",{duration:2e3,delay:100,smooth:"easeInOutQuint",offset:-150})},changePage:p}):null,m&&u.Notify.failure("Oops, something went wrong")]})}},9038:function(e,t,n){n.d(t,{z:function(){return o}});var o=function(e){return e.filter}},1212:function(e,t,n){var o=n(9434),i=n(6628);t.Z=function(){return(0,o.v9)(i.bg)}}}]);
//# sourceMappingURL=543.30aa24d8.chunk.js.map